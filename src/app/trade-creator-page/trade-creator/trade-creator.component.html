<div class="modal-header">
  <div class="modal-header-x" (click)="bsModalRef.hide()">
    <i-feather name="x"></i-feather>
  </div>
</div>
<div *ngIf="readyForDisplay(); else loadingElseBlock">
  <div *ngIf="this.appData.loggedInUser; else elseBlock">
    <div *ngIf="inTutorial" class="d-flex align-items-center justify-content-start w-100 p-3 fs-18px font-weight-bold border-bottom border-color-grey secalt-bg">
      <top-bar-mobile-hamburger-menu class="mr-15px d-lg-none d-inline-block"></top-bar-mobile-hamburger-menu>
      <div *ngIf="inTutorial && !investInYourself && creatorCoinTrade.isBuyingCreatorCoin">
        <h3 class="mb-1 fs-24px font-weight-semibold">
          Invest in a Creator
        </h3>
        <h5 class="fs-15px fc-muted">
          Step 1 of 6
        </h5>
      </div>
      <div *ngIf="inTutorial && !investInYourself && !creatorCoinTrade.isBuyingCreatorCoin">
        <h3 class="mb-1 fs-24px font-weight-semibold">
          Sell a Creator
        </h3>
        <h5 class="fs-15px fc-muted">
          Step 2 of 6
        </h5>
      </div>
      <div *ngIf="inTutorial && investInYourself && creatorCoinTrade.isBuyingCreatorCoin">
        <h3 class="mb-1 fs-24px font-weight-semibold">
          Invest in Yourself
        </h3>
        <h5 class="fs-15px fc-muted">
          Step 4 of 6
        </h5>
      </div>
    </div>
    <div class="buy-bitclout__container">
      <div class="px-16px" *ngIf="screenToShow !== this.TRADE_CREATOR_PREVIEW_SCREEN">
        <div class="d-flex">
          <a
            class="d-none d-lg-block creator-profile__avatar mr-15px"
            [avatar]="creatorCoinTrade.creatorProfile.PublicKeyBase58Check"
          ></a>
          <div class="d-flex flex-column justify-content-center fc-default">
            <div class="fs-24px">{{globalVars.addOwnershipApostrophe(creatorCoinTrade.creatorProfile.Username)}} coin</div>
            <div class="fs-17px">
              <span>â‰ˆ{{ globalVars.nanosToUSD(creatorCoinTrade.creatorProfile.CoinPriceBitCloutNanos, 2) }} </span>
              <span class="fc-muted">Coin Price</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Tabs -->
      <tab-selector
        [buttonSelector]="false"
        [tabs]="tabList"
        [activeTab]="creatorCoinTrade.tradeType"
        (tabClick)="_handleTabClick($event)"
        *ngIf="!inTutorial && screenToShow !== this.TRADE_CREATOR_PREVIEW_SCREEN"
      ></tab-selector>

      <!--Preview Header-->
      <div *ngIf="screenToShow === this.TRADE_CREATOR_PREVIEW_SCREEN" class="mt-5px m-16px mint-nft__title">
        Confirm Operation
      </div>

      <!-- Content -->
      <div *ngIf="screenToShow == this.TRADE_CREATOR_FORM_SCREEN">
        <trade-creator-form
          [creatorCoinTrade]="creatorCoinTrade"
          [hideWarning]="hideWarning"
          (previewClicked)="_onPreviewClicked()"
          (buyCloutClicked)="openBuyCloutModal()"
          (closeModal)="bsModalRef.hide()"
        ></trade-creator-form>
      </div>

      <div *ngIf="screenToShow == this.TRADE_CREATOR_PREVIEW_SCREEN">
        <trade-creator-preview
          [inTutorial]="inTutorial"
          [creatorCoinTrade]="creatorCoinTrade"
          (slippageError)="_onSlippageError()"
          (backButtonClicked)="_onBackButtonClicked()"
          (tradeExecuted)="_onTradeExecuted()"
        ></trade-creator-preview>
      </div>

      <div *ngIf="screenToShow == this.TRADE_CREATOR_COMPLETE_SCREEN">
        <trade-creator-complete
          [creatorCoinTrade]="creatorCoinTrade"
          (tradeAgainButtonClicked)="_onBackButtonClicked()"
        ></trade-creator-complete>
      </div>
    </div>
  </div>

  <ng-template #elseBlock>
    <trade-creator-logged-out [creatorCoinTrade]="creatorCoinTrade"></trade-creator-logged-out>
  </ng-template>
</div>
<ng-template #loadingElseBlock>
  <simple-center-loader></simple-center-loader>
</ng-template>
